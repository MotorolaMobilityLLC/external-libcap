head	1.7;
access;
symbols;
locks; strict;
comment	@# @;


1.7
date	99.01.30.03.50.34;	author morgan;	state Exp;
branches;
next	1.6;

1.6
date	98.09.20.23.10.18;	author morgan;	state Exp;
branches;
next	1.5;

1.5
date	98.06.07.01.53.44;	author morgan;	state Exp;
branches;
next	1.4;

1.4
date	98.05.17.17.31.40;	author morgan;	state Exp;
branches;
next	1.3;

1.3
date	97.05.14.05.14.35;	author morgan;	state Exp;
branches;
next	1.2;

1.2
date	97.05.04.05.31.12;	author morgan;	state Exp;
branches;
next	1.1;

1.1
date	97.04.28.00.54.04;	author morgan;	state Exp;
branches;
next	;


desc
@revised with contributions from Zefram
@


1.7
log
@upped version to 1.0 (to match 2.2.1 Linux kernel)
@
text
@#
# $Id: Make.Rules,v 1.6 1998/09/20 23:10:18 morgan Exp morgan $
#

#
## Optional prefixes:
#

# common 'packaging' directoty

FAKEROOT=

# Autoconf-style prefixes are activated when $(prefix) is defined.
# Otherwise binaries and libraraies are installed in /{lib,sbin}/,
# header files in /usr/include/ and documentation in /usr/man/man?/.

ifdef prefix
exec_prefix=$(prefix)
lib_prefix=$(exec_prefix)
inc_prefix=$(lib_prefix)
man_prefix=$(prefix)
else
prefix=/usr
exec_prefix=
lib_prefix=$(exec_prefix)
inc_prefix=$(prefix)
man_prefix=$(prefix)
endif

# Target directories

MANDIR=$(FAKEROOT)$(man_prefix)/man
SBINDIR=$(FAKEROOT)$(exec_prefix)/sbin
INCDIR=$(FAKEROOT)$(inc_prefix)/include
LIBDIR=$(FAKEROOT)$(lib_prefix)/lib

# common defines for libcap (suitable for 2.2.1+ Linux kernels)
VERSION=1
MINOR=0
#

# Compilation specifics

CC=gcc
COPTFLAGS=-O2
DEBUG=-g #-DDEBUG
WARNINGS=-ansi -D_POSIX_SOURCE -Wall -Wwrite-strings \
        -Wpointer-arith -Wcast-qual -Wcast-align \
        -Wtraditional -Wstrict-prototypes -Wmissing-prototypes \
        -Wnested-externs -Winline -Wshadow -pedantic
LD=ld
LDFLAGS=-s #-g

IPATH=-I$(topdir)/libcap/include
INCS=$(topdir)/libcap/include/sys/capability.h
LIBS=-L$(topdir)/libcap -lcap
CFLAGS=-Dlinux $(WARNINGS) $(DEBUG) $(COPTFLAG) $(IPATH)

# Global cleanup stuff

LOCALCLEAN=rm -f *~ core
DISTCLEAN=@@find . \( -name '*.orig' -o -name '*.rej' \) | xargs rm -f

# Flags to pass down recursive makes

MAKE_DEFS = CC='$(CC)' CFLAGS='$(CFLAGS)' \
	LD='$(LD)' LIBS='$(LIBS)' LDFLAGS='$(LDFLAGS)' \
	VERSION='$(VERSION)' MINOR='$(MINOR)' \
	LIBDIR='$(LIBDIR)' INCDIR='$(INCDIR)' \
	SBINDIR='$(SBINDIR)' MANDIR='$(MANDIR)'
@


1.6
log
@updated for kernel 2.1.122 (should work with 104+, since the changes
are a library bug fix and the addition of an other example prog:
sucap)
@
text
@d2 1
a2 1
# $Id: Make.Rules,v 1.5 1998/06/07 01:53:44 morgan Exp morgan $
d37 3
a39 3
# common defines for libcap
VERSION=0
MINOR=122
@


1.5
log
@updated for 0.104
@
text
@d2 1
a2 1
# $Id: Make.Rules,v 1.4 1998/05/17 17:31:40 morgan Exp morgan $
d39 1
a39 1
MINOR=104
@


1.4
log
@updated version number
modified some compilation flags
@
text
@d2 1
a2 1
# $Id: Make.Rules,v 1.3 1997/05/14 05:14:35 morgan Exp morgan $
d39 1
a39 1
MINOR=102
@


1.3
log
@autoconf rearrangement from Zefram
@
text
@d2 1
a2 1
# $Id: Make.Rules,v 1.2 1997/05/04 05:31:12 morgan Exp morgan $
d39 1
a39 1
MINOR=85
d46 1
a46 1
DEBUG=#-g -DDEBUG
@


1.2
log
@cleaner makefiles
@
text
@d2 1
a2 1
# $Id: Make.Rules,v 1.1 1997/04/28 00:54:04 morgan Exp morgan $
d10 1
d13 16
a28 2
# include file prefix
inc_prefix=/usr
d30 1
a30 2
# library tree prefix
lib_prefix=
d32 4
a35 5
# manual tree prefix
man_prefix=/usr

# sbin directory prefix
sbin_prefix=
d39 1
a39 2
MINOR=80
#
a46 1
FAKEROOT=
d51 3
d55 2
a56 2
LPATH=-L$(topdir)/libcap -lcap

a58 7
# "Interesting target directories"

MANDIR=$(FAKEROOT)$(man_prefix)/man
BINDIR=$(FAKEROOT)$(sbin_prefix)/sbin
INCDIR=$(FAKEROOT)$(inc_prefix)/include
LIBDIR=$(FAKEROOT)$(lib_prefix)/lib

d63 8
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# $Id: Makefile,v 1.1 1997/04/21 04:32:27 morgan Exp $
d4 20
d26 1
a26 1
MINOR=02
d30 2
a31 1
ifndef CC
a32 3
endif

ifndef COPTFLAGS
a33 3
endif

ifndef DEBUG
a34 3
endif

ifndef FAKEROOT
a35 2
endif

a39 5

MANDIR=$(FAKEROOT)/usr/man
BINDIR=$(FAKEROOT)/bin
INCDIR=$(FAKEROOT)/usr/include
LIBDIR=$(FAKEROOT)/lib
d44 9
@
